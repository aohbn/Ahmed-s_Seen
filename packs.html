
<!doctype html><html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ุณูู ุฌูู โข ุงูุญูุฒู</title>
  <link rel="stylesheet" href="assets/style.css">
  <script type="module">
    import { activateTab, store, PACKS_KEY, ACTIVE_PACK_KEY, QUESTIONS_KEY } from "assets/app.js";
    function render(){
      const list = document.getElementById('packsList'); list.innerHTML='';
      const packs = store.get(PACKS_KEY,[]);
      const active = store.get(ACTIVE_PACK_KEY,'default');
      document.getElementById('selectedPackTag').textContent = (packs.find(p=>p.id===active)?.name)||'ุงูุงูุชุฑุงุถูุฉ';
      packs.forEach(p=>{
        const row = document.createElement('div'); row.className='list-item';
        const isActive = p.id===active;
        row.innerHTML = `<span>${p.name} ${isActive?'<span class="tag">ูุณุชุฎุฏูุฉ</span>':''}</span>
          <span class="row">
            ${!isActive?`<button class="btn" data-activate="${p.id}">ุงุณุชุฎุฏุงู</button>`:''}
            ${p.id!=='default'?`<button class="btn danger" data-delete="${p.id}">ุญุฐู</button>`:''}
          </span>`;
        list.appendChild(row);
      });
      list.querySelectorAll('[data-activate]').forEach(b=>{
        b.addEventListener('click', ()=>{ store.set(ACTIVE_PACK_KEY, b.dataset.activate); render(); });
      });
      list.querySelectorAll('[data-delete]').forEach(b=>{
        b.addEventListener('click', ()=>{
          const id = b.dataset.delete;
          if(!confirm('ุญุฐู ูุฐู ุงูุญุฒูุฉุ')) return;
          const packs = store.get(PACKS_KEY,[]).filter(p=>p.id!==id);
          store.set(PACKS_KEY, packs);
          const qs = store.get(QUESTIONS_KEY,[]).filter(q=>q.pack!==id);
          store.set(QUESTIONS_KEY, qs);
          if(store.get(ACTIVE_PACK_KEY,'default')===id) store.set(ACTIVE_PACK_KEY,'default');
          render();
        });
      });
    }
    window.addEventListener('DOMContentLoaded', ()=>{
      activateTab('/packs.html');
      document.getElementById('createPackBtn').addEventListener('click', ()=>{
        const name = (document.getElementById('packNameInput').value||'').trim();
        if(!name) return;
        const id = name.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'') || 'pack-'+Date.now();
        const all = store.get(PACKS_KEY,[]);
        if(all.some(p=>p.id===id)) { alert('ุงุณู ุงูุญุฒูุฉ ููุฌูุฏ'); return; }
        all.push({id,name}); store.set(PACKS_KEY, all);
        document.getElementById('packNameInput').value=''; render();
      });
      render();
    });
  </script>
</head>
<body>
  <header class="nav">
    <div class="container nav-inner">
      <nav class="tabs" id="tabs">
        <a class="tab" href="index.html">ุงูุฑุฆูุณูุฉ</a>
        <a class="tab" href="game.html">ุงููุนุจุฉ</a>
        <a class="tab" href="settings.html">ุงูุฅุนุฏุงุฏุงุช</a>
        <a class="tab" href="questions.html">ุงูุฃุณุฆูุฉ</a>
        <a class="tab active" href="packs.html">ุงูุญูุฒู</a>
      </nav>
      <div class="spacer"></div>
      <div class="brand">๐ฎ ุณูู ุฌูู</div>
    </div>
  </header>
  <main class="container">
    <div class="card">
      <h2>ุงูุญูุฒู</h2>
      <p class="hint">ุฃูุดุฆ ูุฌููุนุงุช ุงูุฃุณุฆูุฉ ูุงุฎุชุฑ ูุงุญุฏุฉ ููุงุณุชุฎุฏุงู.</p>
      <div class="grid cols-2">
        <label>ุงุณู ุงูุญุฒูุฉ <input id="packNameInput" class="input" placeholder="ูุซุงู: ุซูุงูุฉ ุนุงูุฉ"></label>
        <div class="row" style="align-items:flex-end"><button class="btn primary" id="createPackBtn">ุฅูุดุงุก</button></div>
      </div>
      <h3 style="margin-top:18px">ุญูุฒููู <span class="tag" id="selectedPackTag">ุงูุงูุชุฑุงุถูุฉ</span></h3>
      <div id="packsList" class="list"></div>
    </div>
  </main>
  <footer><span>ุณูู ุฌูู โข ุงูุญูุฒู</span></footer>
  <script type="module">import "assets/app.js";</script>
</body></html>
